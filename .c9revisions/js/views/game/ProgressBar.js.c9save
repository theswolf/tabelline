{"ts":1363091007664,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"define([\r\n  'jquery',\r\n  'jqueryui',\r\n  'underscore',\r\n  'backbone'\r\n  //'views/sidebar/SidebarView',\r\n  //'text!templates/game/progressBarTpl.html'\r\n], function($, jqueryui, _, Backbone){\r\n\r\n  var ProgressBar = Backbone.View.extend({\r\n    initialize: function() {\r\n      this.pbar = this.$el;\r\n      this.startValue = 100;\r\n      this.render();\r\n    },\r\n\r\n    render: function(value){\r\n\r\n\r\n      this.pbar.progressbar({\r\n        value: value == null ? this.startValue : value\r\n      });\r\n\r\n      if(value > 25) {\r\n        this.colorize('green');\r\n      }\r\n      else if(value > 5) {\r\n        this.colorize('yellow');\r\n      }\r\n      else  {\r\n        this.colorize('red');\r\n      }\r\n\r\n      \r\n\r\n    },\r\n\r\n    colorize: function(color) {\r\n      this.pbar.find( \".ui-progressbar-value\" ).css({\r\n        \"background\": color\r\n      });\r\n    },\r\n\r\n    timeoutinit: function() {\r\n      var self = Approuter.pbar;\r\n      self.startValue = 101;\r\n      //self.decrease()\r\n      if(self.startValue > 0) {\r\n          setTimeout(function() { self.countdown_trigger() ; },Approuter.timeoutPbar);\r\n        }\r\n    },\r\n\r\n    countdown_trigger: function() {\r\n      if(this.startValue > 0) {\r\n          //document.getElementById('countdown_text').innerHTML = countdown_number;\r\n          this.decrease();\r\n           var self = this;\r\n          if(this.startValue > 0 && (Approuter.count <= Approuter.numQuestion)) {\r\n             countdown = setTimeout(function() {self.countdown_trigger();}, Approuter.timeoutPbar);\r\n          }\r\n          else {\r\n            self.trigger('gameEnded');\r\n            //Approuter.router.navigate('score', true);\r\n          }\r\n        }\r\n    },\r\n\r\n    decrease: function() {\r\n      this.startValue --;\r\n      //if(this.startValue > 0) {\r\n        this.render(this.startValue);\r\n      //}\r\n      \r\n    }\r\n\r\n  });\r\n\r\n  return ProgressBar;\r\n  \r\n});\r\n"]],"start1":0,"start2":0,"length1":0,"length2":1861}]],"length":1861}
